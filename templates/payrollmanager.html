<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    {% include 'header.html' %}
    <style>
        /* Styles remain unchanged */
        .col-md-8 {
            margin-left: 260px;
        }

        input[type="date"],
        input[type="month"] {
            width: 220px;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .payslip-container {
            width: 60%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #fff;
            position: relative;
            overflow: hidden;
            page-break-inside: avoid;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .header .company-info {
            text-align: left;
        }

        .header .company-info h2 {
            margin: 0;
            color: #333;
        }

        .header .company-info p {
            margin: 2px 0;
            color: #777;
        }

        .employee-summary,
        .earnings-deductions,
        .total-net-payable {
            border: 1px solid #ccc;
            margin-bottom: 20px;
            border-radius: 5px;
            padding: 10px;
            background-color: #f9f9f9;
        }

        .employee-summary h6,
        .earnings-deductions h6,
        .total-net-payable h6 {
            margin-top: 0;
        }

        .employee-summary table,
        .earnings-deductions table {
            width: 100%;
            border-collapse: collapse;
        }

        .employee-summary td,
        .earnings-deductions td,
        .total-net-payable td {
            padding: 5px;
            border: 1px solid #ccc;
        }

        .net-pay {
            text-align: center;
            background-color: #cbfadd;
            padding: 10px;
            border-radius: 5px;
        }

        .net-pay h1 {
            margin: 0;
            color: #00796b;
        }

        .earnings-deductions {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .earnings-deductions .earnings,
        .earnings-deductions .deductions {
            width: 100%;
            margin-bottom: 20px;
        }

        @media(min-width: 600px) {

            .earnings-deductions .earnings,
            .earnings-deductions .deductions {
                width: 48%;
                margin-bottom: 0;
            }
        }

        .total-net-payable {
            text-align: left;
            background-color: #e8f5e9;
            padding: 10px;
            border-radius: 5px;
        }

        .note {
            font-size: 12px;
            color: #666;
            text-align: center;
            margin-top: 20px;
        }

        .download-button {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .download-button button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            background-color: #007bff;
            color: #fff;
            border-radius: 5px;
        }

        .download-button button:hover {
            background-color: #fff;
            color: #007bff;
        }

        .emp-table-container {
            position: absolute;
            right: 20px;
            top: 16%;
            width: 18%;
            max-width: 400px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #fff;
            overflow: hidden;
        }

        .emp-table-container table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .emp-table-container th,
        .emp-table-container td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .emp-table-container th {
            background-color: #f2f2f2;
        }

        .emp-table-container tr:hover {
            background-color: #f5f5f5;
        }

        .employee-table-container {
            position: fixed;
            right: 20px;
            top: 20px;
            width: 37%;
            max-width: 400px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #fff;
            overflow: hidden;
        }

        .employee-table-container table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .employee-table-container th,
        .employee-table-container td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .employee-table-container th {
            background-color: #f2f2f2;
        }

        .employee-table-container tr:hover {
            background-color: #f5f5f5;
        }

        .options-link {
            color: #007bff;
            cursor: pointer;
            text-decoration: none;
        }

        .options-link:hover {
            text-decoration: underline;
        }

        .parent-container {
            position: relative;
            height: 10vh;
            text-align: center;
        }

        .col-md-6 {
            display: inline-block;
            vertical-align: middle;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        @media (max-width: 1350px) {
           
            .min-height-300{
              min-height:200px !important;
        
            }
        }
    </style>
</head>

<body class="g-sidenav-show bg-gray-100">
    <div class="payslip-container" id="payslip">
        <form method="POST">
            <div class="header">
                <div class="company-info">
                    <h6>BA Talks Pvt Ltd</h6>
                    <p>500049 India</p>
                </div>
                <div>
                    <img style="height: 70px;" src="/static/assets/img/logo.jpeg" width="208" height="55" alt="logo">
                </div>
                <div class="payslip-info">
                    <h6>Payslip For the Month</h6>
                    <h6>&nbsp;&nbsp;&nbsp;June 2023</h6>
                </div>
            </div>
            <div class="employee-summary">
                <h6>EMPLOYEE SUMMARY</h6>
                <table>
                    <tr>
                        <td>Employee Name</td>
                        <td>:</td>
                        <td id="emp-name"></td>
                        <input type="hidden" name="emp_name" id="emp-name-hidden">
                        <td rowspan="5" class="net-pay">
                            <h3 id="net-pay">₹0.00</h3>
                            <p>Employee Net Pay</p>
                        </td>
                    </tr>
                    <tr>
                        <td>Employee ID</td>
                        <td>:</td>
                        <td id="emp-id"></td>
                        <input type="hidden" name="emp_id" id="emp-id-hidden">
                    </tr>
                    <!-- <tr>
                        <td>Employee Name</td>
                        <td>:</td>
                        <td id="emp-name"></td>
                        <td rowspan="5" class="net-pay">
                            <h3 id="net-pay">₹0.00</h3>
                            <p>Employee Net Pay</p>
                        </td>
                    </tr>
                    <tr>
                        <td>Employee ID</td>
                        <td>:</td>
                        <td id="emp-id"></td>
                        <input type="hidden" name="employee_id" id="emp-id">
                    </tr> -->
                    <!-- <tr>
                        <td>Pay Period</td>
                        <td>:</td>
                        <td> <input class="form-control" type="month" name="pay_period" id="pay_period">
                        </td>
                    </tr> -->
                    <tr>
                        <td>Pay Period</td>
                        <td>:</td>
                        <td>
                            <input class="form-control" type="month" name="pay_period" id="pay_period">
                        </td>
                    </tr>
                    <tr>
                        <td>Pay Date</td>
                        <td>:</td>
                        <td> <input class="form-control" type="date" name="pay_date" id="pay_date">
                        </td>
                    </tr>
                    <tr>
                        <td>UAN</td>
                        <td>:</td>
                        <td id="uan"></td>
                    </tr>
                    <tr>
                        <td>PAN</td>
                        <td>:</td>
                        <td id="pan"></td>
                    </tr>
                    <tr>
                        <td>Bank Name</td>
                        <td>:</td>
                        <td id="bank-name"></td>
                    </tr>
                    <tr>
                        <td>Branch</td>
                        <td>:</td>
                        <td id="branch"></td>
                    </tr>
                    <tr>
                        <td>Bank A/C No</td>
                        <td>:</td>
                        <td id="account-no"></td>
                    </tr>
                </table>
            </div>
            <div class="earnings-deductions">
                <div class="earnings">
                    <h6>EARNINGS</h6>
                    <table>
                        <tr>
                            <td>Basic Pay</td>
                            <td> <input class="form-control" type="number" name="bp" id="basic-pay" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>House Rent Allowance (HRA)</td>
                            <td> <input class="form-control" type="number" name="hra" id="hra" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>Medical Allowance</td>
                            <td> <input class="form-control" type="number" name="ma" id="medical-allowance" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>Conveyance Allowance</td>
                            <td> <input class="form-control" type="number" name="ca" id="conveyance-allowance" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>Other Allowances</td>
                            <td> <input class="form-control" type="number" name="oa" id="other-allowances" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h6>Gross Earnings</h6>
                            </td>
                            <td>
                                <h6 id="gross-earnings">₹0.00</h6>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="deductions">
                    <h6>DEDUCTIONS</h6>
                    <table>
                        <tr>
                            <td>Professional Tax</td>
                            <td> <input class="form-control" type="number" name="pt" id="professional-tax" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>Provident Fund (PF)</td>
                            <td> <input class="form-control" type="number" name="pf" id="provident-fund" value=""
                                    oninput="calculateNetPay()">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h6>Total Deductions</h6>
                            </td>
                            <td>
                                <h6 id="total-deductions">₹0.00</h6>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="total-net-payable">
                <h6>TOTAL NET PAYABLE</h6>
                <table>
                    <tr>
                        <td>Gross Earnings</td>
                        <td id="total-earnings">₹0.00</td>
                    </tr>
                    <tr>
                        <td>Total Deductions</td>
                        <td id="total-deductions2">₹0.00</td>
                    </tr>
                    <tr>
                        <td>Net Payable</td>
                        <td id="net-payable">₹0.00</td>
                    </tr>
                </table>
            </div>
            <div class="form-group">
                <button class="btn btn-primary btn-sm ms-auto" type="submit">Save
                </button>
            </div>
        </form>
    </div>

    <div class="emp-table-container">
        <h6>Employee Information</h6>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr onclick="fillEmployeeDetails('{{ user[0] }}', '{{ user[1] }}')">
                    <td>{{ user[0] }}</td> 
                    <td>{{ user[1] }}</td> 
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <script>
        function fillEmployeeDetails(id, name, uan, pan, bankName, branch, accountNo) {
            document.getElementById('emp-id').innerText = id;
            document.getElementById('emp-name').innerText = name;
            document.getElementById('emp-id-hidden').value = id;  // Hidden input for form submission
            document.getElementById('emp-name-hidden').value = name;  // Hidden input for form submission
            document.getElementById('uan').innerText = uan;
            document.getElementById('pan').innerText = pan;
            document.getElementById('bank-name').innerText = bankName;
            document.getElementById('branch').innerText = branch;
            document.getElementById('account-no').innerText = accountNo;
        }

        function calculateNetPay() {
            let basicPay = parseFloat(document.getElementById('basic-pay').value) || 0;
            let hra = parseFloat(document.getElementById('hra').value) || 0;
            let medicalAllowance = parseFloat(document.getElementById('medical-allowance').value) || 0;
            let conveyanceAllowance = parseFloat(document.getElementById('conveyance-allowance').value) || 0;
            let otherAllowances = parseFloat(document.getElementById('other-allowances').value) || 0;

            let professionalTax = parseFloat(document.getElementById('professional-tax').value) || 0;
            let providentFund = parseFloat(document.getElementById('provident-fund').value) || 0;

            let grossEarnings = basicPay + hra + medicalAllowance + conveyanceAllowance + otherAllowances;
            let totalDeductions = professionalTax + providentFund;
            let netPayable = grossEarnings - totalDeductions;

            document.getElementById('gross-earnings').innerText = '₹' + grossEarnings.toFixed(2);
            document.getElementById('total-deductions').innerText = '₹' + totalDeductions.toFixed(2);
            document.getElementById('total-earnings').innerText = '₹' + grossEarnings.toFixed(2);
            document.getElementById('total-deductions2').innerText = '₹' + totalDeductions.toFixed(2);
            document.getElementById('net-payable').innerText = '₹' + netPayable.toFixed(2);
            document.getElementById('net-pay').innerText = '₹' + netPayable.toFixed(2);
        }
    </script>
</body>
<!--

<body>
    <div>
        <label for="amount">Enter Amount in INR:</label>
        <input type="number" id="amount" placeholder="Enter amount" oninput="convertToWords()">
    </div>
    <div>
        <h3>Amount in Words:</h3>
        <p id="amountInWords"></p>
    </div>

    <script>
        const a = [
            '', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'
        ];
        const b = [
            '', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'
        ];

        function numToWords(num) {
            if ((num = num.toString()).length > 9) return 'overflow';
            let n = ('000000000' + num).substr(-9).match(/(\d{2})(\d{2})(\d{2})(\d{2})(\d{1})/);
            if (!n) return;
            let str = '';
            str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + ' crore ' : '';
            str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + ' lakh ' : '';
            str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + ' thousand ' : '';
            str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + ' hundred ' : '';
            str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) + ' rupees ' : '';
            return str.trim();
        }

        function convertToWords() {
            const amount = document.getElementById('amount').value;
            const amountInWords = numToWords(amount);
            document.getElementById('amountInWords').innerText = amountInWords ? amountInWords + " only" : "";
        }
    </script>
</body>
</html>
-->

</html>